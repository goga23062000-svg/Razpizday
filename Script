-- Position Saver & Teleporter for Roblox
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer

-- Saved position
local savedPosition = nil

-- UI Elements
local screenGui
local saveButton
local teleportButton
local positionLabel

-- Create the user interface
function createUI()
    if screenGui then
        screenGui:Destroy()
    end
    
    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "PositionTeleportUI"
    screenGui.Parent = player.PlayerGui
    screenGui.ResetOnSpawn = false
    
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 200, 0, 140)
    mainFrame.Position = UDim2.new(0, 20, 0, 80)
    mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    mainFrame.BackgroundTransparency = 0.1
    mainFrame.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = mainFrame
    
    local title = Instance.new("TextLabel")
    title.Name = "Title"
    title.Size = UDim2.new(1, 0, 0, 30)
    title.BackgroundTransparency = 1
    title.Text = "POSITION TELEPORT"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 16
    title.Font = Enum.Font.GothamBold
    title.Parent = mainFrame
    
    positionLabel = Instance.new("TextLabel")
    positionLabel.Name = "PositionLabel"
    positionLabel.Size = UDim2.new(1, -20, 0, 35)
    positionLabel.Position = UDim2.new(0, 10, 0, 35)
    positionLabel.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    positionLabel.Text = "No position saved"
    positionLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    positionLabel.TextSize = 12
    positionLabel.Font = Enum.Font.Gotham
    positionLabel.Parent = mainFrame
    
    local labelCorner = Instance.new("UICorner")
    labelCorner.CornerRadius = UDim.new(0, 6)
    labelCorner.Parent = positionLabel
    
    saveButton = Instance.new("TextButton")
    saveButton.Name = "SaveButton"
    saveButton.Size = UDim2.new(1, -20, 0, 35)
    saveButton.Position = UDim2.new(0, 10, 0, 80)
    saveButton.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
    saveButton.Text = "SAVE POSITION"
    saveButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    saveButton.TextSize = 14
    saveButton.Font = Enum.Font.GothamBold
    saveButton.Parent = mainFrame
    
    local saveCorner = Instance.new("UICorner")
    saveCorner.CornerRadius = UDim.new(0, 6)
    saveCorner.Parent = saveButton
    
    teleportButton = Instance.new("TextButton")
    teleportButton.Name = "TeleportButton"
    teleportButton.Size = UDim2.new(1, -20, 0, 35)
    teleportButton.Position = UDim2.new(0, 10, 0, 120)
    teleportButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    teleportButton.Text = "TELEPORT"
    teleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    teleportButton.TextSize = 14
    teleportButton.Font = Enum.Font.GothamBold
    teleportButton.Parent = mainFrame
    
    local teleportCorner = Instance.new("UICorner")
    teleportCorner.CornerRadius = UDim.new(0, 6)
    teleportCorner.Parent = teleportButton
    
    saveButton.MouseButton1Click:Connect(function()
        saveCurrentPosition()
    end)
    
    teleportButton.MouseButton1Click:Connect(function()
        teleportToSavedPosition()
    end)
    
    saveButton.MouseEnter:Connect(function()
        TweenService:Create(saveButton, TweenInfo.new(0.2), {
            BackgroundColor3 = Color3.fromRGB(100, 160, 210)
        }):Play()
    end)
    
    saveButton.MouseLeave:Connect(function()
        if not (saveButton.BackgroundColor3 == Color3.fromRGB(50, 180, 100)) then
            TweenService:Create(saveButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(70, 130, 180)
            }):Play()
        end
    end)
    
    teleportButton.MouseEnter:Connect(function()
        if savedPosition then
            TweenService:Create(teleportButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(120, 200, 120)
            }):Play()
        end
    end)
    
    teleportButton.MouseLeave:Connect(function()
        if savedPosition then
            TweenService:Create(teleportButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(100, 180, 100)
            }):Play()
        end
    end)
    
    updateTeleportButton()
end

-- Save the current player position
function saveCurrentPosition()
    local character = player.Character
    if not character then
        showNotification("No character found!", Color3.fromRGB(255, 100, 100))
        return
    end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then
        showNotification("HumanoidRootPart not found!", Color3.fromRGB(255, 100, 100))
        return
    end
    
    savedPosition = humanoidRootPart.Position
    
    positionLabel.Text = string.format("X: %.1f, Y: %.1f, Z: %.1f", 
        savedPosition.X, savedPosition.Y, savedPosition.Z)
    
    saveButton.BackgroundColor3 = Color3.fromRGB(50, 180, 100)
    
    TweenService:Create(saveButton, TweenInfo.new(0.5), {
        BackgroundColor3 = Color3.fromRGB(70, 130, 180)
    }):Play()
    
    showNotification("Position saved successfully!", Color3.fromRGB(100, 255, 100))
    
    updateTeleportButton()
    
    print("Position saved at:", savedPosition)
end

-- Teleport to the saved position
function teleportToSavedPosition()
    if not savedPosition then
        showNotification("No position saved!", Color3.fromRGB(255, 100, 100))
        return
    end
    
    local character = player.Character
    if not character then
        showNotification("No character found!", Color3.fromRGB(255, 100, 100))
        return
    end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then
        showNotification("HumanoidRootPart not found!", Color3.fromRGB(255, 100, 100))
        return
    end
    
    humanoidRootPart.CFrame = CFrame.new(savedPosition)
    
    teleportButton.BackgroundColor3 = Color3.fromRGB(120, 200, 120)
    
    TweenService:Create(teleportButton, TweenInfo.new(0.5), {
        BackgroundColor3 = Color3.fromRGB(100, 180, 100)
    }):Play()
    
    showNotification("Teleported to saved position!", Color3.fromRGB(100, 200, 255))
    
    print("Teleported to:", savedPosition)
end

-- Update the teleport button state
function updateTeleportButton()
    if savedPosition then
        teleportButton.BackgroundColor3 = Color3.fromRGB(100, 180, 100)
        teleportButton.Text = "TELEPORT"
    else
        teleportButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        teleportButton.Text = "NO POSITION"
    end
end

-- Show a notification message
function showNotification(message, color)
    local notification = Instance.new("TextLabel")
    notification.Name = "Notification"
    notification.Size = UDim2.new(0, 280, 0, 40)
    notification.Position = UDim2.new(0.5, -140, 0.8, 0)
    notification.AnchorPoint = Vector2.new(0.5, 0)
    notification.BackgroundColor3 = color
    notification.BackgroundTransparency = 0.2
    notification.Text = message
    notification.TextColor3 = Color3.fromRGB(255, 255, 255)
    notification.TextSize = 14
    notification.Font = Enum.Font.GothamBold
    notification.ZIndex = 20
    notification.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = notification
    
    TweenService:Create(notification, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
        BackgroundTransparency = 1,
        TextTransparency = 1
    }):Play()
    
    game:GetService("Debris"):AddItem(notification, 2)
end

-- Handle keyboard shortcuts
UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    
    if input.KeyCode == Enum.KeyCode.F7 then
        saveCurrentPosition()
    elseif input.KeyCode == Enum.KeyCode.F8 then
        teleportToSavedPosition()
    end
end)

-- Initialize the script
if player then
    createUI()
    print("Position Teleport script loaded successfully.")
    print("Press F7 to save current position.")
    print("Press F8 to teleport to saved position.")
else
    Players.PlayerAdded:Wait()
    player = Players.LocalPlayer
    createUI()
end

-- Recreate UI when player respawns
player.CharacterAdded:Connect(function()
    wait(0.5)
    createUI()
end)
