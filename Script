-- Services
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- –°–æ–∑–¥–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é GUI
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "TeleportSystem"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–µ–Ω—é
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 350, 1, -40)
mainFrame.Position = UDim2.new(0, -350, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.BackgroundTransparency = 0.1
mainFrame.Parent = screenGui

-- –≠—Ñ—Ñ–µ–∫—Ç —Ä–∞–∑–º—ã—Ç–∏—è —Ñ–æ–Ω–∞
local backgroundBlur = Instance.new("BlurEffect")
backgroundBlur.Name = "MenuBlur"
backgroundBlur.Size = 0
backgroundBlur.Parent = game:GetService("Lighting")

-- –ó–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0, 15)
uiCorner.Parent = mainFrame

-- –¢–µ–Ω—å
local uiShadow = Instance.new("UIStroke")
uiShadow.Color = Color3.fromRGB(0, 0, 0)
uiShadow.Thickness = 2
uiShadow.Transparency = 0.7
uiShadow.Parent = mainFrame

-- –ó–∞–≥–æ–ª–æ–≤–æ–∫
local titleFrame = Instance.new("Frame")
titleFrame.Name = "TitleFrame"
titleFrame.Size = UDim2.new(1, 0, 0, 60)
titleFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
titleFrame.BorderSizePixel = 0
titleFrame.Parent = mainFrame

local titleCorner = Instance.new("UICorner")
titleCorner.CornerRadius = UDim.new(0, 15)
titleCorner.Parent = titleFrame

local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -20, 1, 0)
title.Position = UDim2.new(0, 10, 0, 0)
title.BackgroundTransparency = 1
title.Text = "–¢–ï–õ–ï–ü–û–†–¢ –°–ò–°–¢–ï–ú–ê"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 24
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = titleFrame

local subtitle = Instance.new("TextLabel")
subtitle.Name = "Subtitle"
subtitle.Size = UDim2.new(1, -20, 0, 20)
subtitle.Position = UDim2.new(0, 10, 0, 35)
subtitle.BackgroundTransparency = 1
subtitle.Text = "–°–æ—Ö—Ä–∞–Ω—è–π –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–π—Å—è"
subtitle.TextColor3 = Color3.fromRGB(200, 200, 220)
subtitle.Font = Enum.Font.Gotham
subtitle.TextSize = 14
subtitle.TextXAlignment = Enum.TextXAlignment.Left
subtitle.Parent = titleFrame

-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
local savedPositionsFrame = Instance.new("ScrollingFrame")
savedPositionsFrame.Name = "SavedPositionsFrame"
savedPositionsFrame.Size = UDim2.new(1, -20, 1, -140)
savedPositionsFrame.Position = UDim2.new(0, 10, 0, 70)
savedPositionsFrame.BackgroundTransparency = 1
savedPositionsFrame.ScrollBarThickness = 6
savedPositionsFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 150)
savedPositionsFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
savedPositionsFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
savedPositionsFrame.Parent = mainFrame

local positionsLayout = Instance.new("UIListLayout")
positionsLayout.Padding = UDim.new(0, 10)
positionsLayout.Parent = savedPositionsFrame

-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
local saveButton = Instance.new("TextButton")
saveButton.Name = "SaveButton"
saveButton.Size = UDim2.new(1, -20, 0, 50)
saveButton.Position = UDim2.new(0, 10, 1, -60)
saveButton.BackgroundColor3 = Color3.fromRGB(60, 150, 250)
saveButton.Text = "üíæ –°–û–•–†–ê–ù–ò–¢–¨ –ü–û–ó–ò–¶–ò–Æ"
saveButton.TextColor3 = Color3.fromRGB(255, 255, 255)
saveButton.Font = Enum.Font.GothamBold
saveButton.TextSize = 18
saveButton.AutoButtonColor = false
saveButton.Parent = mainFrame

local saveButtonCorner = Instance.new("UICorner")
saveButtonCorner.CornerRadius = UDim.new(0, 10)
saveButtonCorner.Parent = saveButton

local saveButtonStroke = Instance.new("UIStroke")
saveButtonStroke.Color = Color3.fromRGB(100, 180, 255)
saveButtonStroke.Thickness = 2
saveButtonStroke.Parent = saveButton

-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—é
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 50, 0, 50)
toggleButton.Position = UDim2.new(0, 10, 0.5, -25)
toggleButton.AnchorPoint = Vector2.new(0, 0.5)
toggleButton.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
toggleButton.Text = "‚â°"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 30
toggleButton.AutoButtonColor = false
toggleButton.Parent = screenGui

local toggleButtonCorner = Instance.new("UICorner")
toggleButtonCorner.CornerRadius = UDim.new(0, 10)
toggleButtonCorner.Parent = toggleButton

local toggleButtonStroke = Instance.new("UIStroke")
toggleButtonStroke.Color = Color3.fromRGB(100, 100, 150)
toggleButtonStroke.Thickness = 2
toggleButtonStroke.Parent = toggleButton

screenGui.Parent = playerGui

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
local savedPositions = {}
local menuOpen = false
local isAnimating = false

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ–∑–∏—Ü–∏–∏
local function createPositionCard(positionName, position)
	local card = Instance.new("Frame")
	card.Name = "PositionCard"
	card.Size = UDim2.new(1, 0, 0, 80)
	card.BackgroundColor3 = Color3.fromRGB(45, 45, 60)
	card.BackgroundTransparency = 0.1
	
	local cardCorner = Instance.new("UICorner")
	cardCorner.CornerRadius = UDim.new(0, 10)
	cardCorner.Parent = card
	
	local cardStroke = Instance.new("UIStroke")
	cardStroke.Color = Color3.fromRGB(80, 80, 100)
	cardStroke.Thickness = 1
	cardStroke.Parent = card
	
	local icon = Instance.new("TextLabel")
	icon.Name = "Icon"
	icon.Size = UDim2.new(0, 50, 0, 50)
	icon.Position = UDim2.new(0, 15, 0.5, -25)
	icon.AnchorPoint = Vector2.new(0, 0.5)
	icon.BackgroundColor3 = Color3.fromRGB(60, 150, 250)
	icon.Text = "üìç"
	icon.TextColor3 = Color3.fromRGB(255, 255, 255)
	icon.Font = Enum.Font.GothamBold
	icon.TextSize = 24
	icon.TextScaled = true
	
	local iconCorner = Instance.new("UICorner")
	iconCorner.CornerRadius = UDim.new(0, 10)
	iconCorner.Parent = icon
	
	local positionNameLabel = Instance.new("TextLabel")
	positionNameLabel.Name = "PositionName"
	positionNameLabel.Size = UDim2.new(0.6, -70, 0, 30)
	positionNameLabel.Position = UDim2.new(0, 75, 0, 15)
	positionNameLabel.BackgroundTransparency = 1
	positionNameLabel.Text = positionName
	positionNameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	positionNameLabel.Font = Enum.Font.GothamBold
	positionNameLabel.TextSize = 18
	positionNameLabel.TextXAlignment = Enum.TextXAlignment.Left
	
	local coordinatesLabel = Instance.new("TextLabel")
	coordinatesLabel.Name = "Coordinates"
	coordinatesLabel.Size = UDim2.new(0.6, -70, 0, 20)
	coordinatesLabel.Position = UDim2.new(0, 75, 0, 45)
	coordinatesLabel.BackgroundTransparency = 1
	coordinatesLabel.Text = string.format("X:%.1f Y:%.1f Z:%.1f", position.X, position.Y, position.Z)
	coordinatesLabel.TextColor3 = Color3.fromRGB(200, 200, 220)
	coordinatesLabel.Font = Enum.Font.Gotham
	coordinatesLabel.TextSize = 14
	coordinatesLabel.TextXAlignment = Enum.TextXAlignment.Left
	
	local teleportButton = Instance.new("TextButton")
	teleportButton.Name = "TeleportButton"
	teleportButton.Size = UDim2.new(0, 100, 0, 40)
	teleportButton.Position = UDim2.new(1, -115, 0.5, -20)
	teleportButton.AnchorPoint = Vector2.new(1, 0.5)
	teleportButton.BackgroundColor3 = Color3.fromRGB(80, 200, 120)
	teleportButton.Text = "–¢–ï–õ–ï–ü–û–†–¢"
	teleportButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	teleportButton.Font = Enum.Font.GothamBold
	teleportButton.TextSize = 14
	teleportButton.AutoButtonColor = false
	
	local teleportButtonCorner = Instance.new("UICorner")
	teleportButtonCorner.CornerRadius = UDim.new(0, 8)
	teleportButtonCorner.Parent = teleportButton
	
	local teleportButtonStroke = Instance.new("UIStroke")
	teleportButtonStroke.Color = Color3.fromRGB(120, 220, 150)
	teleportButtonStroke.Thickness = 1
	teleportButtonStroke.Parent = teleportButton
	
	local deleteButton = Instance.new("TextButton")
	deleteButton.Name = "DeleteButton"
	deleteButton.Size = UDim2.new(0, 40, 0, 40)
	deleteButton.Position = UDim2.new(1, -65, 0.5, -20)
	deleteButton.AnchorPoint = Vector2.new(1, 0.5)
	deleteButton.BackgroundColor3 = Color3.fromRGB(220, 80, 80)
	deleteButton.Text = "üóë"
	deleteButton.TextColor3 = Color3.fromRGB(255, 255, 255)
	deleteButton.Font = Enum.Font.GothamBold
	deleteButton.TextSize = 18
	deleteButton.AutoButtonColor = false
	
	local deleteButtonCorner = Instance.new("UICorner")
	deleteButtonCorner.CornerRadius = UDim.new(0, 8)
	deleteButtonCorner.Parent = deleteButton
	
	-- –î–æ–±–∞–≤–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –∫–∞—Ä—Ç–æ—á–∫—É
	icon.Parent = card
	positionNameLabel.Parent = card
	coordinatesLabel.Parent = card
	teleportButton.Parent = card
	deleteButton.Parent = card
	
	-- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–Ω–æ–ø–æ–∫
	teleportButton.MouseButton1Click:Connect(function()
		local character = player.Character
		if character and character:FindFirstChild("HumanoidRootPart") then
			-- –≠—Ñ—Ñ–µ–∫—Ç —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
			local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
			local tween = TweenService:Create(character.HumanoidRootPart, tweenInfo, {CFrame = CFrame.new(position)})
			tween:Play()
			
			-- –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
			teleportButton.Text = "‚ö°"
			task.wait(0.5)
			teleportButton.Text = "–¢–ï–õ–ï–ü–û–†–¢"
		end
	end)
	
	deleteButton.MouseButton1Click:Connect(function()
		-- –ê–Ω–∏–º–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è
		local tweenInfo = TweenInfo.new(0.3, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
		local tween = TweenService:Create(card, tweenInfo, {Size = UDim2.new(0, 0, 0, 80), BackgroundTransparency = 1})
		tween:Play()
		tween.Completed:Wait()
		card:Destroy()
		
		-- –£–¥–∞–ª—è–µ–º –∏–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
		for i, pos in ipairs(savedPositions) do
			if pos.name == positionName then
				table.remove(savedPositions, i)
				break
			end
		end
	end)
	
	-- –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞–≤–µ–¥–µ–Ω–∏—è
	local function onHover(button, originalColor, hoverColor)
		button.MouseEnter:Connect(function()
			if not isAnimating then
				TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = hoverColor}):Play()
			end
		end)
		
		button.MouseLeave:Connect(function()
			if not isAnimating then
				TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = originalColor}):Play()
			end
		end)
	end
	
	onHover(teleportButton, Color3.fromRGB(80, 200, 120), Color3.fromRGB(100, 220, 140))
	onHover(deleteButton, Color3.fromRGB(220, 80, 80), Color3.fromRGB(240, 100, 100))
	
	return card
end

-- –§—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
local function saveCurrentPosition()
	local character = player.Character
	if not character or not character:FindFirstChild("HumanoidRootPart") then
		return
	end
	
	local position = character.HumanoidRootPart.Position
	local positionName = "–ü–æ–∑–∏—Ü–∏—è #" .. (#savedPositions + 1)
	
	-- –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∞—Å—Å–∏–≤
	table.insert(savedPositions, {
		name = positionName,
		position = position
	})
	
	-- –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫—É
	local card = createPositionCard(positionName, position)
	card.Parent = savedPositionsFrame
	
	-- –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
	saveButton.Text = "‚úì –°–û–•–†–ê–ù–ï–ù–û!"
	task.wait(0.5)
	saveButton.Text = "üíæ –°–û–•–†–ê–ù–ò–¢–¨ –ü–û–ó–ò–¶–ò–Æ"
end

-- –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—é
local function toggleMenu()
	if isAnimating then return end
	isAnimating = true
	
	menuOpen = not menuOpen
	
	local mainFrameGoal = menuOpen and UDim2.new(0, 10, 0.5, 0) or UDim2.new(0, -350, 0.5, 0)
	local toggleButtonGoal = menuOpen and UDim2.new(0, 360, 0.5, -25) or UDim2.new(0, 10, 0.5, -25)
	local blurSize = menuOpen and 10 or 0
	
	-- –ê–Ω–∏–º–∞—Ü–∏—è –º–µ–Ω—é
	local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
	local tween1 = TweenService:Create(mainFrame, tweenInfo, {Position = mainFrameGoal})
	local tween2 = TweenService:Create(toggleButton, tweenInfo, {Position = toggleButtonGoal})
	local tween3 = TweenService:Create(backgroundBlur, tweenInfo, {Size = blurSize})
	
	tween1:Play()
	tween2:Play()
	tween3:Play()
	
	tween1.Completed:Connect(function()
		isAnimating = false
	end)
end

-- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
saveButton.MouseButton1Click:Connect(saveCurrentPosition)
toggleButton.MouseButton1Click:Connect(toggleMenu)

-- –≠—Ñ—Ñ–µ–∫—Ç—ã –Ω–∞–≤–µ–¥–µ–Ω–∏—è –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
local function setupButtonHover(button, originalColor, hoverColor)
	button.MouseEnter:Connect(function()
		if not isAnimating then
			TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = hoverColor}):Play()
		end
	end)
	
	button.MouseLeave:Connect(function()
		if not isAnimating then
			TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = originalColor}):Play()
		end
	end)
end

setupButtonHover(saveButton, Color3.fromRGB(60, 150, 250), Color3.fromRGB(80, 170, 255))
setupButtonHover(toggleButton, Color3.fromRGB(40, 40, 55), Color3.fromRGB(60, 60, 75))

-- –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–µ–Ω—é (Tab)
UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if gameProcessed then return end
	
	if input.KeyCode == Enum.KeyCode.Tab then
		toggleMenu()
	end
end)

-- –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
task.spawn(function()
	task.wait(2) -- –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏
	local character = player.Character
	if character and character:FindFirstChild("HumanoidRootPart") then
		local position = character.HumanoidRootPart.Position
		table.insert(savedPositions, {
			name = "–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ç–æ—á–∫–∞",
			position = position
		})
		
		local card = createPositionCard("–°—Ç–∞—Ä—Ç–æ–≤–∞—è —Ç–æ—á–∫–∞", position)
		card.Parent = savedPositionsFrame
	end
end)

print("Teleport System –∑–∞–≥—Ä—É–∂–µ–Ω! –ù–∞–∂–º–∏—Ç–µ Tab –∏–ª–∏ –∫–Ω–æ–ø–∫—É ‚â° —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é.")
