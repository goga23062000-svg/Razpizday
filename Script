-- Position Saver & Teleporter for Roblox
local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local TS = game:GetService("TweenService")

local player = Players.LocalPlayer

-- Saved position
local savedPosition = nil

-- UI
local screenGui
local saveBtn
local teleportBtn
local posLabel

-- Create UI
local function createUI()
    if screenGui then screenGui:Destroy() end
    
    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "PositionTeleportUI"
    screenGui.Parent = player.PlayerGui
    screenGui.ResetOnSpawn = false
    
    -- Main frame
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 180, 0, 130)
    frame.Position = UDim2.new(0, 20, 0, 80)
    frame.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    frame.BackgroundTransparency = 0.1
    frame.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = frame
    
    -- Title
    local title = Instance.new("TextLabel")
    title.Size = UDim2.new(1, 0, 0, 30)
    title.BackgroundTransparency = 1
    title.Text = "POSITION TELEPORT"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 14
    title.Font = Enum.Font.GothamBold
    title.Parent = frame
    
    -- Position label
    posLabel = Instance.new("TextLabel")
    posLabel.Size = UDim2.new(1, -20, 0, 30)
    posLabel.Position = UDim2.new(0, 10, 0, 35)
    posLabel.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    posLabel.Text = "No position saved"
    posLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    posLabel.TextSize = 12
    posLabel.Font = Enum.Font.Gotham
    posLabel.Parent = frame
    
    local labelCorner = Instance.new("UICorner")
    labelCorner.CornerRadius = UDim.new(0, 6)
    labelCorner.Parent = posLabel
    
    -- Save button
    saveBtn = Instance.new("TextButton")
    saveBtn.Size = UDim2.new(1, -20, 0, 30)
    saveBtn.Position = UDim2.new(0, 10, 0, 75)
    saveBtn.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
    saveBtn.Text = "SAVE POSITION"
    saveBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    saveBtn.TextSize = 14
    saveBtn.Font = Enum.Font.GothamBold
    saveBtn.Parent = frame
    
    local saveCorner = Instance.new("UICorner")
    saveCorner.CornerRadius = UDim.new(0, 6)
    saveCorner.Parent = saveBtn
    
    -- Teleport button
    teleportBtn = Instance.new("TextButton")
    teleportBtn.Size = UDim2.new(1, -20, 0, 30)
    teleportBtn.Position = UDim2.new(0, 10, 0, 110)
    teleportBtn.BackgroundColor3 = Color3.fromRGB(100, 180, 100)
    teleportBtn.Text = "TELEPORT"
    teleportBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    teleportBtn.TextSize = 14
    teleportBtn.Font = Enum.Font.GothamBold
    teleportBtn.Parent = frame
    
    local teleportCorner = Instance.new("UICorner")
    teleportCorner.CornerRadius = UDim.new(0, 6)
    teleportCorner.Parent = teleportBtn
    
    -- Button events
    saveBtn.MouseButton1Click:Connect(function()
        saveCurrentPosition()
    end)
    
    teleportBtn.MouseButton1Click:Connect(function()
        teleportToSavedPosition()
    end)
    
    -- Update teleport button state
    updateTeleportButton()
end

-- Save current position
local function saveCurrentPosition()
    local character = player.Character
    if not character then return end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end
    
    savedPosition = humanoidRootPart.Position
    
    -- Update label
    posLabel.Text = string.format("X: %.1f, Y: %.1f, Z: %.1f", 
        savedPosition.X, savedPosition.Y, savedPosition.Z)
    
    -- Visual feedback
    saveBtn.BackgroundColor3 = Color3.fromRGB(50, 180, 100)
    
    TS:Create(saveBtn, TweenInfo.new(0.5), {
        BackgroundColor3 = Color3.fromRGB(70, 130, 180)
    }):Play()
    
    showNotification("Position saved!", Color3.fromRGB(100, 255, 100))
    
    updateTeleportButton()
end

-- Teleport to saved position
local function teleportToSavedPosition()
    if not savedPosition then
        showNotification("No position saved!", Color3.fromRGB(255, 100, 100))
        return
    end
    
    local character = player.Character
    if not character then return end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return end
    
    -- Teleport
    humanoidRootPart.CFrame = CFrame.new(savedPosition)
    
    -- Visual feedback
    teleportBtn.BackgroundColor3 = Color3.fromRGB(120, 200, 120)
    
    TS:Create(teleportBtn, TweenInfo.new(0.5), {
        BackgroundColor3 = Color3.fromRGB(100, 180, 100)
    }):Play()
    
    showNotification("Teleported to saved position!", Color3.fromRGB(100, 200, 255))
end

-- Update teleport button state
local function updateTeleportButton()
    if savedPosition then
        teleportBtn.BackgroundColor3 = Color3.fromRGB(100, 180, 100)
        teleportBtn.Text = "TELEPORT"
    else
        teleportBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
        teleportBtn.Text = "NO POSITION"
    end
end

-- Show notification
local function showNotification(message, color)
    local note = Instance.new("TextLabel")
    note.Size = UDim2.new(0, 250, 0, 40)
    note.Position = UDim2.new(0.5, -125, 0.8, 0)
    note.AnchorPoint = Vector2.new(0.5, 0)
    note.BackgroundColor3 = color
    note.BackgroundTransparency = 0.2
    note.Text = message
    note.TextColor3 = Color3.fromRGB(255, 255, 255)
    note.TextSize = 14
    note.Font = Enum.Font.GothamBold
    note.ZIndex = 20
    note.Parent = screenGui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = note
    
    TS:Create(note, TweenInfo.new(0.5), {
        BackgroundTransparency = 1,
        TextTransparency = 1
    }):Play()
    
    game:GetService("Debris"):AddItem(note, 2)
end

-- Hotkeys
UIS.InputBegan:Connect(function(input, processed)
    if processed then return end
    
    -- F7 to save position
    if input.KeyCode == Enum.KeyCode.F7 then
        saveCurrentPosition()
    end
    
    -- F8 to teleport
    if input.KeyCode == Enum.KeyCode.F8 then
        teleportToSavedPosition()
    end
end)

-- Initialize
if player then
    createUI()
    print("Position Teleport script loaded.")
    print("Press F7 to save position, F8 to teleport.")
else
    Players.PlayerAdded:Wait()
    player = Players.LocalPlayer
    createUI()
end

-- Recreate UI on respawn
player.CharacterAdded:Connect(function()
    wait(0.5)
    createUI()
end)
